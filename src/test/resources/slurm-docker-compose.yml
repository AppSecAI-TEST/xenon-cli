version: '3'
services:
  mysql:
    image: mysql:5.5
    environment:
    - MYSQL_ROOT_PASSWORD=xenon-slurm-pw
    healthcheck:
      test: ["CMD",  "mysqladmin", "-pxenon-slurm-pw", "ping" ]
      interval: 1s
  slurm:
    image: nlesc/xenon-slurm
    depends_on:
    - mysql
    ports:
    - 22 # ssh
    healthcheck:
      test: ["CMD",  "sinfo" ]
      interval: 1s